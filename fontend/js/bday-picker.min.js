/*
 * jQuery Birthday Picker: v1.1.1 - 11/16/2010
 * http://abecoffman.com/birthdaypicker
 * 
 * Copyright (c) 2010 Abe Coffman
 * Dual licensed under the MIT and GPL licenses.
 * 
 */
(function(b){var a={"short":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"long":["January","February","March","April","May","June","July","August","September","October","November","December"]};b.fn.birthdaypicker=function(d){var f={maxAge:120,futureDates:false,maxYear:e,dateFormat:"middleEndian",monthFormat:"short",placeholder:true,legend:""};var c=new Date();var e=c.getFullYear();var h=c.getMonth()+1;var g=c.getDate();return this.each(function(){if(d){b.extend(f,d)}var p=b("<fieldset class='birthday-picker'></fieldset>");var o=b("<select class='birth-year' name='birth[year]'></select>");var n=b("<select class='birth-month' name='birth[month]'></select>");var i=b("<select class='birth-day' name='birth[day]'></select>");if(f.legend){b("<legend>"+f.legend+"</legend>").appendTo(p)}if(f.placeholder){b("<option value='0'>Year:</option>").appendTo(o);b("<option value='0'>Month:</option>").appendTo(n);b("<option value='0'>Day:</option>").appendTo(i)}if(f.dateFormat=="bigEndian"){p.append(o).append(n).append(i)}else{if(f.dateFormat=="littleEndian"){p.append(i).append(n).append(o)}else{p.append(n).append(i).append(o)}}var q=e;var s=e-f.maxAge;if(f.futureDates&&f.maxYear!=e){if(f.maxYear>1000){q=f.maxYear}else{q=e+f.maxYear}}while(q>=s){b("<option></option>").attr("value",q).text(q).appendTo(o);q--}for(var m=0;m<12;m++){b("<option></option>").attr("value",m+1).text(a[f.monthFormat][m]).appendTo(n)}for(var l=1;l<32;l++){b("<option></option>").attr("value",l).text(l).appendTo(i)}var r=b(this);r.append(p);p.change(function(){var k=parseInt(n.children(":last").val());var u=parseInt(i.children(":last").val());var j=new Date(o.val(),n.val(),0);var t=j.getDate();if(u>t){while(u>t){i.children(":last").remove();u--}}else{if(u<t){while(u<t){b("<option></option>").attr("value",u+1).text(u+1).appendTo(i);u++}}}if(!f.futureDates&&o.val()==e){if(k>h){while(k>h){n.children(":last").remove();k--}}if(n.val()==h){if(u>g){while(u>g){i.children(":last").remove();u--}}}}if(o.val()!=e&&k!=12){while(k<12){b("<option></option>").attr("value",k+1).text(a[f.monthFormat][k]).appendTo(n);k++}}})})}})(jQuery);