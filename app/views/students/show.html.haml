-if @owner
  :javascript  
    $(document).ready(function(){
      function addClickToToggle(master_button, sub_button_class, off_text, on_text){
        $(master_button).click(function(){
          if($(master_button).html() == off_text){
            $(sub_button_class).show();
            $(master_button).html(on_text);
          }
          else{
            $(sub_button_class).hide();
            $(master_button).html(off_text);
          }
        });
      }
    
      addClickToToggle("#careers_edit", ".delete_career_button", "(edit)", "(stop)");
      addClickToToggle("#activities_edit", ".edit_activity_button", "(edit)", "(stop)");
      addClickToToggle("#work_edit", ".edit_work_button", "(edit)", "(stop)");
      addClickToToggle("#courses_edit", ".delete_course_button", "(edit)", "(stop)");
      addClickToToggle("#awards_edit", ".delete_award_button", "(edit)", "(stop)");
      addClickToToggle("#interests_edit", ".delete_interest_button", "(edit)", "(stop)");
    });
  
    $(function() {
      
    });

-if current_user.is_company_entity?
  = render :partial => "company_file", :locals => { :student => @student, :company_file => @company_file } 
%h2
  = h @student.user.name
  -if current_user.is_company_entity?
    =render :partial => "shared/star", :locals => {:entity_type => "Student", :entity_id => @student.id, :starred => @company_file.starred}
  (#{@student.baseline_score})
%h3
  = h @student.subtitle
  -if @owner
    = link_to "(edit)", "#", {:onClick => "$('\#subtitle').toggle(); return false;"}
    .hidden_detail{:id => "subtitle", :style => "display:none" }
      = form_for @student do |f|
        = f.text_field :subtitle, :size => 50
        = submit_tag "change"
%p
  = h address_block(@student)
  -if @owner
    = link_to "(edit)", "#", {:onClick => "$('\#address').toggle(); return false;"}
    .hidden_detail{:id => "address", :style => "display:none" }
      = form_for @student do |f|
        = f.text_field :address_line1, :size => 30
        %br/
        = f.text_field :address_line2, :size => 30
        %br/
        = f.text_field :address_city, :size => 15
        = f.text_field :address_state, :size => 5
        = f.text_field :address_zip, :size => 5
        = submit_tag "change"
%p
  %b 
    Career Interests:
  -if @owner
    = link_to "(edit)", "#", {:id => "careers_edit", :onClick => "return false;"}
  %ul
    - for career in @student.careers
      %li
        = career_block(career)
        -if @owner
          %span.delete_career_button{:style => "display:none"}
            = link_to "[X]", delete_career_s_path(:id => career.id)
      
    -if @owner
      = render "add_career"
%p
  %b Gpa:
  = h @student.gpa
  -if @owner
    = link_to "(edit)", "#", {:onClick => "$('\#gpa').toggle(); return false;"}
    .hidden_detail{:id => "gpa", :style => "display:none" }
      = form_for @student do |f|
        = f.text_field :gpa, :size => 5
        = submit_tag "change"
%p
  %b Hometown:
  = h @student.hometown
  -if @owner
    = link_to "(edit)", "#", {:onClick => "$('\#hometown').toggle(); return false;"}
    .hidden_detail{:id => "hometown", :style => "display:none" }
      = form_for @student do |f|
        = f.text_field :hometown, :size => 20
        = submit_tag "change"
%p
  %b Phone:
  = h number_to_phone(@student.phone, :area_code => true)
  -if @owner
    = link_to "(edit)", "#", {:onClick => "$('\#phone').toggle(); return false;"}
    .hidden_detail{:id => "phone", :style => "display:none" }
      = form_for @student do |f|
        = f.text_field :phone, :size => 20
        = submit_tag "change"
  
%p
  %b Email:
  = h @student.user.email
%p
  %b Gender:
  = @student.user.gender_is_male ? "male" : "female"
%p
  %b Education:
  %ul
    - for school_map in @student.school_students
      %li= school_block_for_student(school_map)
%p
  %b Relevant Coursework:
  -if @owner
    = link_to "(edit)", "#", {:id => "courses_edit", :onClick => "return false;"}
  %ul
    = render :partial => "course_student", :collection => @student.course_students
    %br
    -if @owner
      = render "add_course"
    
%p
  %b Experiences:
  -if @owner
    = link_to "(edit)", "#", {:id => "work_edit", :onClick => "return false;"}
  %ul
    - for experience in @student.work_experiences
      %li
        = work_experience_block(experience)
        %span.edit_work_button{:style => "display:none"}
          %br/  
          = link_to "(edit)", edit_experience_path(experience)
    -if @owner
      %li=link_to "Add an experience", new_experience_path
%p
  %b Activities and Leadership:
  -if @owner
    = link_to "(edit)", "#", {:id => "activities_edit", :onClick => "return false;"}
  %ul
    - for experience in @student.club_experiences
      %li
        = club_experience_block(experience)
        -if @owner
          %span.edit_activity_button{:style => "display:none"}
            %br/  
            = link_to "(edit)", edit_experience_path(experience)
    -if @owner
      %li=link_to "Add an experience", new_experience_path
%p
  %b Awards:
  -if @owner
    = link_to "(edit)", "#", {:id => "awards_edit", :onClick => "return false;"}
  %ul
    - for award in @student.awards
      %li
        = link_to award.name, award.becomes(Term)
        -if @owner
          %span.delete_award_button{:style => "display:none"}
            = link_to "[X]", delete_award_s_path(:id => award.id)
    -if @owner
      %li= render "add_award"
%p
  %b Other Interests:
  -if @owner
    = link_to "(edit)", "#", {:id => "interests_edit", :onClick => "return false;"}
  %ul
    - for interest in @student.interests
      %li
        = interest_block(interest)
        -if @owner
          %span.delete_interest_button{:style => "display:none"}
            = link_to "[X]", delete_interest_s_path(:id => interest.id)
      
    -if @owner
      %li= render "add_interest"
%p
  %b Fun facts:
  = h @student.fun_facts
  -if @owner
    = link_to "(edit)", "#", {:onClick => "$('\#fun_facts').toggle(); return false;"}
    .hidden_detail{:id => "fun_facts", :style => "display:none" }
      = form_for @student do |f|
        = f.text_area :fun_facts
        = submit_tag "change"
%p
  %b Updates:
  %ul
    - for update in @updates
      %li= print_update_block(update, :show_name => false)

= link_to 'Edit', edit_student_path(@student)
|
\#{link_to 'Back', students_path}